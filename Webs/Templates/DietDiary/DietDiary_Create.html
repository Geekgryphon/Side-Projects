<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <?php 
    
        if(isset($_POST)){
            

            header("Location: .php");
        }
    
    ?>
    <form action="">
        <label for="DietName">食譜名稱:</label>
        <input name="DietName" type="text">
        <br/>

        <label for="">簡介</label>
        <textarea name="" id="" cols="30" rows="10"></textarea>
        <br/>

        <!-- 料理圖 -->
        <input type="file" multiple = "multiple">
        <br/>
        <label for="PeopleCounts">份數:</label>
        <input name="PeopleCounts" type="number">
        <br/>

        <label for="protein">蛋白:</label>&nbsp;
        <input name="protein" type="number">  &nbsp;&nbsp;  克
        <br/>
        <label for="carb">碳水:</label>&nbsp;
        <input name="carb" type="number"> &nbsp;&nbsp;  克
        <br/>
        <label for="fat">脂肪:</label>&nbsp;
        <input name="fat" type="number"> &nbsp;&nbsp;  克
        <br/>
        <label for="kcal">熱量:</label>
        <input name="kcal" type="number">
        <br/>
        <br/>
        
        <label for="Ingredient">食材</label>
            <div id="Food_Box">
                
            </div>
        <br/>
        <!-- <input name="kcal" type="text"  ><input name="kcal" type="text"><button>Delete</button> -->
        <br/>
        <span id="addIngredient">加入食材</span>
        <br/>
        <br/>

        <label for="kcal">分組</label>
        
        組別名稱 + 刪除按鈕
        食材 + 份量 + 刪除按鈕
        加入食材按鈕
        <button>加入分組</button>
        <br/>

        增加步驟
        步驟
        <input type="file" name="" id="">
        1
        <textarea name="" id="" cols="30" rows="10"></textarea>
        刪除按鈕

        小撇步
        <textarea name="" id="" cols="30" rows="10"></textarea>

        


        <button>新增，儲存，取消，刪除
        </button>


    </form>
    <script type="text/javascript">

        const addIngredient = document.querySelector("#addIngredient");

        function DeleteFood(event) {
            let clickedSpan = event.target;
            let spanId = clickedSpan.id.substring(clickedSpan.id.length- 2);
            console.log(spanId);
            
            let Deletebutton1 = document.querySelector('#Ingredient' + spanId);
            Deletebutton1.parentElement.removeChild(Deletebutton1);

            let Deletebutton2 = document.querySelector('#Unit' + spanId);
            Deletebutton2.parentElement.removeChild(Deletebutton2);

            let Deletebutton3 = document.querySelector('#DeleteFood' + spanId);
            Deletebutton3.parentElement.removeChild(Deletebutton3);
           
        }


        addIngredient.addEventListener("click",(event) => {

            let FoodCounts = document.querySelectorAll('[id^=Ingredient]').length;

            let FoodNumber =  (FoodCounts + 1).toString().padStart(2,"0");

            const Food_Box = document.querySelector("#Food_Box");

            let Food = document.createElement("INPUT");
            Food.setAttribute('type','text');
            Food.setAttribute('id','Ingredient' + FoodNumber);

            let Unit = document.createElement("INPUT");
            Unit.setAttribute('type','text');
            Unit.setAttribute('id','Unit' + FoodNumber);

            let DeleteFood = document.createElement("span");
            DeleteFood.setAttribute('id','DeleteFood' + FoodNumber);
            DeleteFood.setAttribute('onclick','DeleteFood(event);');
            DeleteFood.innerHTML = '刪除';

            
            


            let br = document.createElement("br");

            Food_Box.appendChild(Food);
            Food_Box.appendChild(Unit);
            Food_Box.appendChild(DeleteFood);
            Food_Box.appendChild(br);
        });
        
    </script>
</body>
</html>